data<-full_join(gararito, resultados_avaliacoes, by=c("municipio", "item", "criterio"))
data[is.na(data)] <- ""
precisao <- data %>%
group_by(municipio, criterio, item) %>%
mutate(
tp = encontrado_turmalina == TRUE
& encontrado_turmalina == encontrado
& (grepl(local_encontrado, local_encontrado_turmalina) |
grepl(local_encontrado_2, local_encontrado_turmalina)),
fn =  encontrado_turmalina == FALSE
& encontrado == TRUE,
fp = encontrado_turmalina == TRUE
& encontrado == FALSE
)
tp <-  sum(precisao$tp)
fn <- sum(precisao$fn)
fp <- sum(precisao$fp)
recall <- tp/(tp+fn)
recall
precision <- tp/(tp+fp)
precision
(2*(recall*precision))/(recall+precision)
library(tidyverse) #
library(jsonlite) # Ler dados json
library(dplyr) #
library(here)
library(ggplot2)
source(here::here("code/lib.R"))
theme_set(theme_bw())
resultados_avaliacoes = read_avaliacoes()
gararito = read_gabaritos()
data<-full_join(gararito, resultados_avaliacoes, by=c("municipio", "item", "criterio"))
data[is.na(data)] <- ""
precisao <- data %>%
group_by(municipio, criterio, item) %>%
mutate(
tp = encontrado_turmalina == TRUE
& encontrado_turmalina == encontrado
& (grepl(local_encontrado, local_encontrado_turmalina) |
grepl(local_encontrado_2, local_encontrado_turmalina)),
fn =  encontrado_turmalina == FALSE
& encontrado == TRUE,
fp = encontrado_turmalina == TRUE
& encontrado == FALSE
)
tp <-  sum(precisao$tp)
fn <- sum(precisao$fn)
fp <- sum(precisao$fp)
recall <- tp/(tp+fn)
recall
precision <- tp/(tp+fp)
precision
(2*(recall*precision))/(recall+precision)
data %>% group_by(item, criterio) %>% summarise(num = count(municipio == 'Esperança'))
library(tidyverse) #
library(jsonlite) # Ler dados json
library(dplyr) #
library(here)
library(ggplot2)
source(here::here("code/lib.R"))
theme_set(theme_bw())
resultados_avaliacoes = read_avaliacoes()
gararito = read_gabaritos()
data<-full_join(gararito, resultados_avaliacoes, by=c("municipio", "item", "criterio"))
data %>%
group_by(item, criterio) %>%
summarise(num = count(municipio == 'Esperança'))
data %>%
group_by(item, criterio)
---
title: "REPLACE ME"
output:
html_document:
df_print: paged
theme: sandstone
---
```{r echo=FALSE, message=FALSE, warning=FALSE}
library(tidyverse) #
library(jsonlite) # Ler dados json
library(dplyr) #
library(here)
library(ggplot2)
source(here::here("code/lib.R"))
theme_set(theme_bw())
```
## Lendo os dados
```{r read}
resultados_avaliacoes = read_avaliacoes()
gararito = read_gabaritos()
data<-full_join(gararito, resultados_avaliacoes, by=c("municipio", "item", "criterio"))
data %>%
group_by(item, criterio) %>%
summarise(num = count(municipio == 'Esperança'))
```
```{r}
data[is.na(data)] <- ""
precisao <- data %>%
group_by(municipio, criterio, item) %>%
mutate(
tp = encontrado_turmalina == TRUE
& encontrado_turmalina == encontrado
& (grepl(local_encontrado, local_encontrado_turmalina) |
grepl(local_encontrado_2, local_encontrado_turmalina)),
fn =  encontrado_turmalina == FALSE
& encontrado == TRUE,
fp = encontrado_turmalina == TRUE
& encontrado == FALSE
)
```
Quantificando métricas
```{r}
tp <-  sum(precisao$tp)
fn <- sum(precisao$fn)
fp <- sum(precisao$fp)
```
Recall
```{r}
recall <- tp/(tp+fn)
recall
```
Precision
```{r}
precision <- tp/(tp+fp)
precision
```
F1-score
```{r}
(2*(recall*precision))/(recall+precision)
```
avaliacoes <- fromJSON("http://localhost:5000/api/v1/evaluation/Esperan%C3%A7a/")
install.packages('jsonlite')
install.packages("jsonlite")
install.packages("dplyr")
install.packages("here")
avaliacoes <- fromJSON("http://localhost:5000/api/v1/evaluation/Esperan%C3%A7a/")
install.packages("rjson")
avaliacoes <- fromJSON("http://localhost:5000/api/v1/evaluation/Esperan%C3%A7a/")
fromJSON("http://localhost:5000/api/v1/evaluation/Esperan%C3%A7a/")
fromJSON("http://localhost:5000/api/v1/evaluation/Esperan%C3%A7a/")
avaliacoes <- fromJSON("http://localhost:5000/api/v1/evaluation/Esperança/")
avaliacoes <- fromJSON("http://localhost:5000/api/v1/evaluation/Esperança/")
avaliacoes <- fromJSON("http://localhost:5000/api/v1/evaluation/Esperança/")
library(tidyverse) #
library(jsonlite) # Ler dados json
library(dplyr) #
library(here)
avaliacoes <- fromJSON("http://localhost:5000/api/v1/evaluation/Esperança/")
avaliacoes = avaliacoes %>%
group_by(item = item_abreviado, municipio, criterio) %>%
summarise(
encontrado_turmalina = encontrado,
local_encontrado_turmalina = onde_foi_encontrado
)
avaliacoes %>%
write_csv(here::here("data/resultados_avaliacoes.csv"))
library(tidyverse) #
library(jsonlite) # Ler dados json
library(dplyr) #
library(here)
avaliacoes <- fromJSON("http://localhost:5000/api/v1/evaluation/Esperança/")
install.packages("curl")
avaliacoes <- fromJSON("http://localhost:5000/api/v1/evaluation/Esperança/")
install.packages("curl")
library(tidyverse) #
library(jsonlite) # Ler dados json
library(dplyr) #
library(here)
library(curl)
install.packages("tidyverse")
avaliacoes <- fromJSON("http://localhost:5000/api/v1/evaluation/Esperança/")
library(tidyverse) #
library(jsonlite) # Ler dados json
library(dplyr) #
library(here)
library(curl)
avaliacoes <- fromJSON("http://localhost:5000/api/v1/evaluation/Esperança/")
avaliacoes = avaliacoes %>%
group_by(item = item_abreviado, municipio, criterio) %>%
summarise(
encontrado_turmalina = encontrado,
local_encontrado_turmalina = onde_foi_encontrado
)
avaliacoes %>%
write_csv(here::here("data/resultados_avaliacoes.csv"))
library(tidyverse) #
library(jsonlite) # Ler dados json
library(dplyr) #
library(here)
library(curl)
avaliacoes <- fromJSON("http://localhost:5000/api/v1/evaluation/Esperança/")
install.packages("curl")
install.packages("curl")
library(tidyverse) #
library(jsonlite) # Ler dados json
library(dplyr) #
library(here)
library(curl)
avaliacoes <- fromJSON("http://localhost:5000/api/v1/evaluation/Esperança/")
fromJSON("http://localhost:5000/api/v1/evaluation/Esperança/")
fromJSON("http://localhost:5000/api/v1/evaluation/Esperan%C3%A7a")
avaliacoes <- fromJSON("http://localhost:5000/api/v1/evaluation/Esperan%C3%A7a")
View(avaliacoes)
View(avaliacoes)
fromJSON("http://localhost:5000/api/v1/evaluation/Esperan%C3%A7a")$itens
fromJSON("http://localhost:5000/api/v1/evaluation/Esperan%C3%A7a")$criterions
fromJSON("http://localhost:5000/api/v1/evaluation/Esperan%C3%A7a")$criterions$itens
avaliacoes <- fromJSON("http://localhost:5000/api/v1/evaluation/Esperan%C3%A7a")$criterions
avaliacoes <- fromJSON("http://localhost:5000/api/v1/evaluation/Esperan%C3%A7a")$criterions
library(data.table)
install.packages("data.table")
ibrary(tidyverse) #
library(jsonlite) # Ler dados json
library(dplyr) #
library(here)
avaliacoes <- fromJSON("http://localhost:5000/api/v1/evaluation/Esperan%C3%A7a")
json_file <- sapply(rfc, function(x) {
x[sapply(x, is.null)] <- NA
unlist(x)
as.data.frame(t(x))
})
library(data.table)
data.table::rbindlist(json_file, fill= TRUE)
View(data)
library(tidyverse) #
library(jsonlite) # Ler dados json
library(dplyr) #
library(here)
avaliacoes <- fromJSON("http://localhost:5000/api/v1/evaluation/Esperan%C3%A7a")
json_file <- sapply(rfc, function(x) {
x[sapply(x, is.null)] <- NA
unlist(x)
as.data.frame(t(x))
})
library(data.table)
data.table::rbindlist(json_file, fill= TRUE)
View(avaliacoes)
df <- data.frame(matrix(unlist(avaliacoes$criterions), nrow=132, byrow=T),stringsAsFactors=FALSE)
View(df)
df <- data.frame(matrix(unlist(avaliacoes$criterions), nrow=length(l), byrow=T))
View(df)
library(tidyverse) #
library(jsonlite) # Ler dados json
library(dplyr) #
library(here)
avaliacoes <- fromJSON("http://localhost:5000/api/v1/evaluation/Esperan%C3%A7a")
df <- data.frame(matrix(unlist(avaliacoes$criterions), nrow=length(l), byrow=T))
View(avaliacoes)
df <- data.frame(matrix(unlist(avaliacoes$criterions), nrow=length(l), byrow=T))
df <- data.frame(matrix(unlist(avaliacoes$criterions), nrow=length(avaliacoes$criterions), byrow=T))
View(df)
avaliacoes$criterions
View(avaliacoes)
avaliacoes <- fromJSON("http://localhost:5000/api/v1/evaluation/Esperan%C3%A7a", flatten = TRUE)
avaliacoes <- fromJSON("http://localhost:5000/api/v1/evaluation/Esperan%C3%A7a", flatten = TRUE)
avaliacoes <- fromJSON("http://localhost:5000/api/v1/evaluation/Esperan%C3%A7a", flatten = TRUE)$criterions
avaliacoes <- fromJSON("http://localhost:5000/api/v1/evaluation/Esperan%C3%A7a", flatten = TRUE)$criterions
avaliacoes <- fromJSON("http://localhost:5000/api/v1/evaluation/Esperan%C3%A7a", flatten = TRUE)[[1]]
avaliacoes <- fromJSON("http://localhost:5000/api/v1/evaluation/Esperan%C3%A7a", flatten = TRUE)[[1]][[1]]
avaliacoes
View(avaliacoes)
library(purrr)
library(tidyr)
d = avaliacoes %>%
unnest(itens)
View(d)
library(tidyverse) #
library(jsonlite) # Ler dados json
library(dplyr) #
library(here)
library(tidyr)
avaliacoes <- fromJSON("http://localhost:5000/api/v1/evaluation/Esperan%C3%A7a", flatten = TRUE)[[1]][[1]]
library(tidyverse) #
library(jsonlite) # Ler dados json
library(dplyr) #
library(here)
library(tidyr)
avaliacoes <- fromJSON("http://localhost:5000/api/v1/evaluation/Esperan%C3%A7a", flatten = TRUE)[[1]][[1]]
d = avaliacoes %>%
unnest(itens)
View(d)
avaliacoes %>%
unnest(criterions) %>%
unnest(itens)
avaliacoes <- fromJSON("http://localhost:5000/api/v1/evaluation/Esperan%C3%A7a", flatten = TRUE)[[1]][[1]]
avaliacoes <- fromJSON("http://localhost:5000/api/v1/evaluation/Esperan%C3%A7a", flatten = TRUE)
View(avaliacoes)
avaliacoes %>%
unnest(criterions) %>%
unnest(itens)
avaliacoes <- avaliacoes %>%
unnest(criterions) %>%
unnest(itens)
avaliacoes <- fromJSON("http://localhost:5000/api/v1/evaluation/Esperan%C3%A7a", flatten = TRUE)
avaliacoes <- avaliacoes %>%
unnest(criterions) %>%
unnest(itens)
View(avaliacoes)
library(tidyverse) #
library(jsonlite) # Ler dados json
library(dplyr) #
library(here)
library(tidyr)
avaliacoes <- fromJSON("http://localhost:5000/api/v1/evaluation/Esperan%C3%A7a", flatten = TRUE)
avaliacoes <- avaliacoes %>%
unnest(criterions) %>%
unnest(itens) %>%
group_by(item = name1, municipio = county, criterio = name) %>%
summarise(
encontrado_autidor_crawler = valid,
local_encontrado_turmalina = pathSought
)
avaliacoes %>%
write_csv(here::here("data/resultados_avaliacoes.csv"))
library(tidyverse) #
library(jsonlite) # Ler dados json
library(dplyr) #
library(here)
library(tidyr)
avaliacoes <- fromJSON("http://localhost:5000/api/v1/evaluation/Esperan%C3%A7a", flatten = TRUE)
avaliacoes <- avaliacoes %>%
unnest(criterions) %>%
unnest(itens) %>%
group_by(item = name1, municipio = county, criterio = name) %>%
summarise(
encontrado_autidor_crawler = valid,
local_encontrado_turmalina = pathSought
)
View(avaliacoes)
library(tidyverse) #
library(jsonlite) # Ler dados json
library(dplyr) #
library(here)
library(tidyr)
avaliacoes <- fromJSON("http://localhost:5000/api/v1/evaluation/Esperan%C3%A7a", flatten = TRUE)
avaliacoes <- avaliacoes %>%
unnest(criterions) %>%
unnest(itens) %>%
group_by(item = name1, municipio = county, criterio = name) %>%
summarise(
valid,
found,
pathSought
)
avaliacoes %>%
write_csv(here::here("data/resultados_avaliacoes.csv"))
library(jsonlite) # Ler dados json
avaliacoes <- avaliacoes %>%
unnest(criterions) %>%
unnest(itens) %>%
group_by(item = name1, municipio = county, criterio = name) %>%
summarise(
valid,
found,
pathSought
)
library(tidyverse) #
library(jsonlite) # Ler dados json
library(dplyr) #
library(here)
library(tidyr)
avaliacoes <- fromJSON("http://localhost:5000/api/v1/evaluation/Esperan%C3%A7a", flatten = TRUE)
avaliacoes <- avaliacoes %>%
unnest(criterions) %>%
unnest(itens) %>%
group_by(item = name1, municipio = county, criterio = name) %>%
summarise(
valid,
found,
pathSought
)
View(avaliacoes)
avaliacoes %>%
write_csv(here::here("data/resultados_avaliacoes.csv"))
library(tidyverse) #
library(jsonlite) # Ler dados json
library(dplyr) #
library(here)
library(tidyr)
library(readr)
avaliacoes <- fromJSON("http://localhost:5000/api/v1/evaluation/Esperan%C3%A7a", flatten = TRUE)
avaliacoes <- avaliacoes %>%
unnest(criterions) %>%
unnest(itens) %>%
group_by(item = name1, municipio = county, criterio = name) %>%
summarise(
valid,
found,
pathSought
)
avaliacoes %>%
write_csv(here::here("data/resultados_avaliacoes.csv"))
library(tidyverse) #
library(jsonlite) # Ler dados json
library(dplyr) #
library(here)
library(tidyr)
library(readr)
avaliacoes <- fromJSON("http://localhost:5000/api/v1/evaluation/Esperan%C3%A7a", flatten = TRUE)
avaliacoes <- avaliacoes %>%
unnest(criterions) %>%
unnest(itens) %>%
group_by(item = name1, municipio = county, criterio = name) %>%
summarise(
valid,
found,
pathSought
)
avaliacoes %>%
write_csv(here::here("data/resultados_avaliacoes.csv"))
View(avaliacoes)
library(tidyverse) #
install install.packages('tidyverse')
install install.packages('tidyverse')
install install.packages('tidyverse')
install install.packages('tidyverse')
library(tidyverse) #
library(tidyverse) #
library(tidyverse) #
library(tidyverse) #
install.packages("tidyverse")
library(tidyverse) #
library(jsonlite) # Ler dados json
library(dplyr) #
library(here)
library(ggplot2)
source(here::here("code/lib.R"))
theme_set(theme_bw())
resultados_avaliacoes = read_avaliacoes()
gararito = read_gabaritos()
data<-full_join(gararito, resultados_avaliacoes, by=c("municipio", "item", "criterio"))
data %>%
group_by(item, criterio) %>%
summarise(num = count(municipio == 'Esperança'))
library(tidyverse) #
library(jsonlite) # Ler dados json
library(dplyr) #
library(here)
library(ggplot2)
source(here::here("code/lib.R"))
theme_set(theme_bw())
resultados_avaliacoes = read_avaliacoes()
gararito = read_gabaritos()
View(gararito)
library(tidyverse) #
library(jsonlite) # Ler dados json
library(dplyr) #
library(here)
library(ggplot2)
source(here::here("code/lib.R"))
theme_set(theme_bw())
resultados_avaliacoes = read_avaliacoes('Esperança')
gararito = read_gabaritos()
library(tidyverse) #
library(jsonlite) # Ler dados json
library(dplyr) #
library(here)
library(ggplot2)
source(here::here("code/lib.R"))
theme_set(theme_bw())
resultados_avaliacoes = read_avaliacoes('Esperança')
gararito = read_gabaritos('Esperança')
library(tidyverse) #
library(jsonlite) # Ler dados json
library(dplyr) #
library(here)
library(ggplot2)
source(here::here("code/lib.R"))
theme_set(theme_bw())
resultados_avaliacoes = read_avaliacoes('Esperança')
gararito = read_gabaritos('Esperança')
View(gararito)
data<-full_join(gararito, resultados_avaliacoes, by=c("municipio", "item", "criterio"))
View(data)
View(resultados_avaliacoes)
data[is.na(data)] <- ""
precisao <- data %>%
group_by(municipio, criterio, item) %>%
mutate(
#verifica se a avaliação foi acertiva
tp = valid == TRUE
& valid == encontrado
#valida se no gabarito e na avaliação o item foi encontrado na mesma url
& (grepl(local_encontrado, pathSought) |
grepl(local_encontrado_2, local_encontrado_turmalina)),
fn =  valid == FALSE
& encontrado == TRUE,
fp = valid == TRUE
& encontrado == FALSE
)
data[is.na(data)] <- ""
precisao <- data %>%
group_by(municipio, criterio, item) %>%
mutate(
#verifica se a avaliação foi acertiva
tp = valid == TRUE
& valid == encontrado
#valida se no gabarito e na avaliação o item foi encontrado na mesma url
& (grepl(local_encontrado, pathSought) |
grepl(local_encontrado_2, pathSought)),
fn =  valid == FALSE
& encontrado == TRUE,
fp = valid == TRUE
& encontrado == FALSE
)
tp <-  sum(precisao$tp)
fn <- sum(precisao$fn)
fp <- sum(precisao$fp)
recall <- tp/(tp+fn)
recall
precision <- tp/(tp+fp)
precision
(2*(recall*precision))/(recall+precision)
