avaliacoes <- avaliacoes %>%
unnest(criterions.itens) %>%
group_by(item = name, municipio = county, criterio = criterions.name) %>%
summarise(
valid,
found,
pathSought
)
avaliacoes %>%
write_csv(here::here("data/resultados_avaliacoes.csv"))
library(tidyverse) #
library(jsonlite) # Ler dados json
library(dplyr) #
library(here)
library(ggplot2)
source(here::here("code/lib.R"))
theme_set(theme_bw())
resultados_avaliacoes = read_avaliacoes('Esperança')
gararito = read_gabaritos('Esperança')
data<-full_join(gararito, resultados_avaliacoes, by=c("municipio", "item", "criterio"))
resultados_avaliacoes = read_avaliacoes('Campina Grande')
gararito = read_gabaritos('Campina Grande')
data<-full_join(gararito, resultados_avaliacoes, by=c("municipio", "item", "criterio"))
library(tidyverse) #
library(jsonlite) # Ler dados json
library(dplyr) #
library(here)
library(ggplot2)
source(here::here("code/lib.R"))
theme_set(theme_bw())
resultados_avaliacoes = read_avaliacoes('Campina Grande')
gararito = read_gabaritos('Campina Grande')
data<-full_join(gararito, resultados_avaliacoes, by=c("municipio", "item", "criterio"))
View(resultados_avaliacoes)
data[is.na(data)] <- ""
precisao <- data %>%
group_by(municipio, criterio, item) %>%
mutate(
#verifica se a avaliação foi acertiva
tp = valid == TRUE
& valid == encontrado
#valida se no gabarito e na avaliação o item foi encontrado na mesma url
& (grepl(local_encontrado, pathSought) |
grepl(local_encontrado_2, pathSought)),
fn =  valid == FALSE
& encontrado == TRUE,
fp = valid == TRUE
& encontrado == FALSE
)
precisao %>%
group_by(criterio, municipio) %>%
summarize(total_fn = sum(fn == TRUE), total_itens = n()) %>%
ggplot() +
geom_bar(aes(x=criterio, y=total_fn), fill="#DD8888",stat="identity")
precisao %>%
group_by(criterio, municipio) %>%
summarize(total_fp = sum(fp == TRUE), total_itens = n()) %>%
ggplot() +
geom_bar(aes(x=criterio, y=total_fp), fill="#DD8888",stat="identity")
precisao %>% filter(fp == TRUE)
precisao %>% filter(fn == TRUE)
recall <- tp/(tp+fn)
library(tidyverse) #
library(jsonlite) # Ler dados json
library(dplyr) #
library(here)
library(ggplot2)
source(here::here("code/lib.R"))
theme_set(theme_bw())
resultados_avaliacoes = read_avaliacoes('Campina Grande')
gararito = read_gabaritos('Campina Grande')
data<-full_join(gararito, resultados_avaliacoes, by=c("municipio", "item", "criterio"))
data[is.na(data)] <- ""
precisao <- data %>%
group_by(municipio, criterio, item) %>%
mutate(
#verifica se a avaliação foi acertiva
tp = valid == TRUE
& valid == encontrado
#valida se no gabarito e na avaliação o item foi encontrado na mesma url
& (grepl(local_encontrado, pathSought) |
grepl(local_encontrado_2, pathSought)),
fn =  valid == FALSE
& encontrado == TRUE,
fp = valid == TRUE
& encontrado == FALSE
)
tp <-  sum(precisao$tp)
fn <- sum(precisao$fn)
fp <- sum(precisao$fp)
precisao %>%
group_by(criterio, municipio) %>%
summarize(total_fn = sum(fn == TRUE), total_itens = n()) %>%
ggplot() +
geom_bar(aes(x=criterio, y=total_fn), fill="#DD8888",stat="identity")
precisao %>%
group_by(criterio, municipio) %>%
summarize(total_fp = sum(fp == TRUE), total_itens = n()) %>%
ggplot() +
geom_bar(aes(x=criterio, y=total_fp), fill="#DD8888",stat="identity")
precisao %>% filter(fp == TRUE)
precisao %>% filter(fn == TRUE)
recall <- tp/(tp+fn)
recall
precision <- tp/(tp+fp)
precision
(2*(recall*precision))/(recall+precision)
library(tidyverse) #
library(jsonlite) # Ler dados json
library(dplyr) #
library(here)
library(ggplot2)
source(here::here("code/lib.R"))
theme_set(theme_bw())
resultados_avaliacoes = read_avaliacoes('Campina Grande')
gararito = read_gabaritos('Campina Grande')
data<-full_join(gararito, resultados_avaliacoes, by=c("municipio", "item", "criterio"))
data[is.na(data)] <- ""
precisao <- data %>%
group_by(municipio, criterio, item) %>%
mutate(
#verifica se a avaliação foi acertiva
tp = valid == TRUE
& valid == encontrado
#valida se no gabarito e na avaliação o item foi encontrado na mesma url
& (grepl(local_encontrado, pathSought) |
grepl(local_encontrado_2, pathSought)),
fn =  valid == FALSE
& encontrado == TRUE,
fp = valid == TRUE
& encontrado == FALSE
)
tp <-  sum(precisao$tp)
fn <- sum(precisao$fn)
fp <- sum(precisao$fp)
precisao %>%
group_by(criterio, municipio) %>%
summarize(total_fn = sum(fn == TRUE), total_itens = n()) %>%
ggplot() +
geom_bar(aes(x=criterio, y=total_fn), fill="#DD8888",stat="identity")
precisao %>%
group_by(criterio, municipio) %>%
summarize(total_fp = sum(fp == TRUE), total_itens = n()) %>%
ggplot() +
geom_bar(aes(x=criterio, y=total_fp), fill="#DD8888",stat="identity")
precisao %>% filter(fp == TRUE)
precisao %>% filter(fn == TRUE)
recall <- tp/(tp+fn)
recall
precision <- tp/(tp+fp)
precision
(2*(recall*precision))/(recall+precision)
library(tidyverse) #
library(jsonlite) # Ler dados json
library(dplyr) #
library(here)
library(tidyr)
library(readr)
avaliacoes <- data.frame(fromJSON("http://localhost:5000/api/v1/evaluation/Ouro%20Velho/last", flatten = TRUE))
avaliacoes <- avaliacoes %>%
unnest(criterions.itens) %>%
group_by(item = name, municipio = county, criterio = criterions.name) %>%
summarise(
valid,
found,
pathSought
)
avaliacoes %>%
write_csv(here::here("data/resultados_avaliacoes.csv"))
library(tidyverse) #
library(jsonlite) # Ler dados json
library(dplyr) #
library(here)
library(ggplot2)
source(here::here("code/lib.R"))
theme_set(theme_bw())
resultados_avaliacoes = read_avaliacoes('Campina Grande')
gararito = read_gabaritos('Campina Grande')
data<-full_join(gararito, resultados_avaliacoes, by=c("municipio", "item", "criterio"))
data[is.na(data)] <- ""
precisao <- data %>%
group_by(municipio, criterio, item) %>%
mutate(
#verifica se a avaliação foi acertiva
tp = valid == TRUE
& valid == encontrado
#valida se no gabarito e na avaliação o item foi encontrado na mesma url
& (grepl(local_encontrado, pathSought) |
grepl(local_encontrado_2, pathSought)),
fn =  valid == FALSE
& encontrado == TRUE,
fp = valid == TRUE
& encontrado == FALSE
)
tp <-  sum(precisao$tp)
fn <- sum(precisao$fn)
fp <- sum(precisao$fp)
precisao %>%
group_by(criterio, municipio) %>%
summarize(total_fn = sum(fn == TRUE), total_itens = n()) %>%
ggplot() +
geom_bar(aes(x=criterio, y=total_fn), fill="#DD8888",stat="identity")
precisao %>%
group_by(criterio, municipio) %>%
summarize(total_fp = sum(fp == TRUE), total_itens = n()) %>%
ggplot() +
geom_bar(aes(x=criterio, y=total_fp), fill="#DD8888",stat="identity")
precisao %>% filter(fp == TRUE)
precisao %>% filter(fn == TRUE)
recall <- tp/(tp+fn)
recall
precision <- tp/(tp+fp)
precision
(2*(recall*precision))/(recall+precision)
library(tidyverse) #
library(jsonlite) # Ler dados json
library(dplyr) #
library(here)
library(ggplot2)
source(here::here("code/lib.R"))
theme_set(theme_bw())
resultados_avaliacoes = read_avaliacoes('Ouro Velho')
gararito = read_gabaritos('Ouro Velho')
data<-full_join(gararito, resultados_avaliacoes, by=c("municipio", "item", "criterio"))
data[is.na(data)] <- ""
precisao <- data %>%
group_by(municipio, criterio, item) %>%
mutate(
#verifica se a avaliação foi acertiva
tp = valid == TRUE
& valid == encontrado
#valida se no gabarito e na avaliação o item foi encontrado na mesma url
& (grepl(local_encontrado, pathSought) |
grepl(local_encontrado_2, pathSought)),
fn =  valid == FALSE
& encontrado == TRUE,
fp = valid == TRUE
& encontrado == FALSE
)
tp <-  sum(precisao$tp)
fn <- sum(precisao$fn)
fp <- sum(precisao$fp)
precisao %>%
group_by(criterio, municipio) %>%
summarize(total_fn = sum(fn == TRUE), total_itens = n()) %>%
ggplot() +
geom_bar(aes(x=criterio, y=total_fn), fill="#DD8888",stat="identity")
precisao %>%
group_by(criterio, municipio) %>%
summarize(total_fp = sum(fp == TRUE), total_itens = n()) %>%
ggplot() +
geom_bar(aes(x=criterio, y=total_fp), fill="#DD8888",stat="identity")
precisao %>% filter(fp == TRUE)
precisao %>% filter(fn == TRUE)
recall <- tp/(tp+fn)
recall
precision <- tp/(tp+fp)
precision
(2*(recall*precision))/(recall+precision)
library(tidyverse) #
library(jsonlite) # Ler dados json
library(dplyr) #
library(here)
library(ggplot2)
source(here::here("code/lib.R"))
theme_set(theme_bw())
resultados_avaliacoes = read_avaliacoes('Ouro Velho')
gararito = read_gabaritos('Ouro Velho')
data<-full_join(gararito, resultados_avaliacoes, by=c("municipio", "item", "criterio"))
data[is.na(data)] <- ""
precisao <- data %>%
group_by(municipio, criterio, item) %>%
mutate(
#verifica se a avaliação foi acertiva
tp = valid == TRUE
& valid == encontrado
#valida se no gabarito e na avaliação o item foi encontrado na mesma url
& (grepl(local_encontrado, pathSought) |
grepl(local_encontrado_2, pathSought)),
fn =  valid == FALSE
& encontrado == TRUE,
fp = valid == TRUE
& encontrado == FALSE
)
tp <-  sum(precisao$tp)
fn <- sum(precisao$fn)
fp <- sum(precisao$fp)
precisao %>%
group_by(criterio, municipio) %>%
summarize(total_fn = sum(fn == TRUE), total_itens = n()) %>%
ggplot() +
geom_bar(aes(x=criterio, y=total_fn), fill="#DD8888",stat="identity")
precisao %>%
group_by(criterio, municipio) %>%
summarize(total_fp = sum(fp == TRUE), total_itens = n()) %>%
ggplot() +
geom_bar(aes(x=criterio, y=total_fp), fill="#DD8888",stat="identity")
precisao %>% filter(fp == TRUE)
precisao %>% filter(fn == TRUE)
recall <- tp/(tp+fn)
recall
precision <- tp/(tp+fp)
precision
(2*(recall*precision))/(recall+precision)
library(tidyverse) #
library(jsonlite) # Ler dados json
library(dplyr) #
library(here)
library(tidyr)
library(readr)
avaliacoes <- data.frame(fromJSON("http://localhost:5000/api/v1/evaluation/Esperança/last", flatten = TRUE))
avaliacoes <- avaliacoes %>%
unnest(criterions.itens) %>%
group_by(item = name, municipio = county, criterio = criterions.name) %>%
summarise(
valid,
found,
pathSought
)
avaliacoes %>%
write_csv(here::here("data/resultados_avaliacoes.csv"))
library(tidyverse) #
library(jsonlite) # Ler dados json
library(dplyr) #
library(here)
library(tidyr)
library(readr)
avaliacoes <- data.frame(fromJSON("http://localhost:5000/api/v1/evaluation/Esperan%C3%A7a/last", flatten = TRUE))
avaliacoes <- avaliacoes %>%
unnest(criterions.itens) %>%
group_by(item = name, municipio = county, criterio = criterions.name) %>%
summarise(
valid,
found,
pathSought
)
avaliacoes %>%
write_csv(here::here("data/resultados_avaliacoes.csv"))
library(tidyverse) #
library(jsonlite) # Ler dados json
library(dplyr) #
library(here)
library(ggplot2)
source(here::here("code/lib.R"))
theme_set(theme_bw())
resultados_avaliacoes = read_avaliacoes('Esperança')
gararito = read_gabaritos('Esperança')
data<-full_join(gararito, resultados_avaliacoes, by=c("municipio", "item", "criterio"))
data[is.na(data)] <- ""
precisao <- data %>%
group_by(municipio, criterio, item) %>%
mutate(
#verifica se a avaliação foi acertiva
tp = valid == TRUE
& valid == encontrado
#valida se no gabarito e na avaliação o item foi encontrado na mesma url
& (grepl(local_encontrado, pathSought) |
grepl(local_encontrado_2, pathSought)),
fn =  valid == FALSE
& encontrado == TRUE,
fp = valid == TRUE
& encontrado == FALSE
)
tp <-  sum(precisao$tp)
fn <- sum(precisao$fn)
fp <- sum(precisao$fp)
precisao %>%
group_by(criterio, municipio) %>%
summarize(total_fn = sum(fn == TRUE), total_itens = n()) %>%
ggplot() +
geom_bar(aes(x=criterio, y=total_fn), fill="#DD8888",stat="identity")
precisao %>%
group_by(criterio, municipio) %>%
summarize(total_fp = sum(fp == TRUE), total_itens = n()) %>%
ggplot() +
geom_bar(aes(x=criterio, y=total_fp), fill="#DD8888",stat="identity")
precisao %>% filter(fp == TRUE)
precisao %>% filter(fn == TRUE)
recall <- tp/(tp+fn)
recall
precision <- tp/(tp+fp)
precision
(2*(recall*precision))/(recall+precision)
library(tidyverse) #
library(jsonlite) # Ler dados json
library(dplyr) #
library(here)
library(tidyr)
library(readr)
avaliacoes <- data.frame(fromJSON("http://localhost:5000/api/v1/evaluation/Arara/last", flatten = TRUE))
avaliacoes <- avaliacoes %>%
unnest(criterions.itens) %>%
group_by(item = name, municipio = county, criterio = criterions.name) %>%
summarise(
valid,
found,
pathSought
)
avaliacoes %>%
write_csv(here::here("data/resultados_avaliacoes.csv"))
library(tidyverse) #
library(jsonlite) # Ler dados json
library(dplyr) #
library(here)
library(ggplot2)
source(here::here("code/lib.R"))
theme_set(theme_bw())
resultados_avaliacoes = read_avaliacoes('Arara')
gararito = read_gabaritos('Arara')
data<-full_join(gararito, resultados_avaliacoes, by=c("municipio", "item", "criterio"))
data[is.na(data)] <- ""
precisao <- data %>%
group_by(municipio, criterio, item) %>%
mutate(
#verifica se a avaliação foi acertiva
tp = valid == TRUE
& valid == encontrado
#valida se no gabarito e na avaliação o item foi encontrado na mesma url
& (grepl(local_encontrado, pathSought) |
grepl(local_encontrado_2, pathSought)),
fn =  valid == FALSE
& encontrado == TRUE,
fp = valid == TRUE
& encontrado == FALSE
)
tp <-  sum(precisao$tp)
fn <- sum(precisao$fn)
fp <- sum(precisao$fp)
precisao %>%
group_by(criterio, municipio) %>%
summarize(total_fn = sum(fn == TRUE), total_itens = n()) %>%
ggplot() +
geom_bar(aes(x=criterio, y=total_fn), fill="#DD8888",stat="identity")
precisao %>%
group_by(criterio, municipio) %>%
summarize(total_fp = sum(fp == TRUE), total_itens = n()) %>%
ggplot() +
geom_bar(aes(x=criterio, y=total_fp), fill="#DD8888",stat="identity")
precisao %>% filter(fp == TRUE)
precisao %>% filter(fn == TRUE)
recall <- tp/(tp+fn)
recall
precision <- tp/(tp+fp)
precision
(2*(recall*precision))/(recall+precision)
View(resultados_avaliacoes)
library(tidyverse) #
library(jsonlite) # Ler dados json
library(dplyr) #
library(here)
library(tidyr)
library(readr)
avaliacoes <- data.frame(fromJSON("http://localhost:5000/api/v1/evaluation/Arara/last", flatten = TRUE))
avaliacoes <- avaliacoes %>%
unnest(criterions.itens) %>%
group_by(item = name, municipio = county, criterio = criterions.name) %>%
summarise(
valid,
found,
pathSought
)
avaliacoes %>%
write_csv(here::here("data/resultados_avaliacoes.csv"))
View(avaliacoes)
avaliacoes <- data.frame(fromJSON("http://localhost:5000/api/v1/evaluation/Arara/last", flatten = TRUE))
View(avaliacoes)
View(avaliacoes[[1]][[6]])
library(tidyverse) #
library(jsonlite) # Ler dados json
library(dplyr) #
library(here)
library(ggplot2)
source(here::here("code/lib.R"))
theme_set(theme_bw())
resultados_avaliacoes = read_avaliacoes('Arara')
gararito = read_gabaritos('Arara')
data<-full_join(gararito, resultados_avaliacoes, by=c("municipio", "item", "criterio"))
data[is.na(data)] <- ""
precisao <- data %>%
group_by(municipio, criterio, item) %>%
mutate(
#verifica se a avaliação foi acertiva
tp = valid == TRUE
& valid == encontrado
#valida se no gabarito e na avaliação o item foi encontrado na mesma url
& (grepl(local_encontrado, pathSought) |
grepl(local_encontrado_2, pathSought)),
fn =  valid == FALSE
& encontrado == TRUE,
fp = valid == TRUE
& encontrado == FALSE
)
tp <-  sum(precisao$tp)
fn <- sum(precisao$fn)
fp <- sum(precisao$fp)
precisao %>%
group_by(criterio, municipio) %>%
summarize(total_fn = sum(fn == TRUE), total_itens = n()) %>%
ggplot() +
geom_bar(aes(x=criterio, y=total_fn), fill="#DD8888",stat="identity")
precisao %>%
group_by(criterio, municipio) %>%
summarize(total_fp = sum(fp == TRUE), total_itens = n()) %>%
ggplot() +
geom_bar(aes(x=criterio, y=total_fp), fill="#DD8888",stat="identity")
precisao %>% filter(fp == TRUE)
precisao %>% filter(fn == TRUE)
recall <- tp/(tp+fn)
recall
precision <- tp/(tp+fp)
precision
(2*(recall*precision))/(recall+precision)
